:root {
  --bg: #0d0c0a;
  --bg-elevated: #181613;
  --text: #e8e0d4;
  --text-muted: #6b6259;
  --accent: #b8845a;
  --accent-glow: rgba(184, 132, 90, 0.15);
  --ease: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --cell-size: 60px;
  --grid-gap: 2px;
  --safe-b: env(safe-area-inset-bottom, 0px);
  --safe-l: env(safe-area-inset-left, 0px);
  --safe-r: env(safe-area-inset-right, 0px);
}

*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
html { -webkit-font-smoothing: antialiased; -webkit-text-size-adjust: 100%; }

body {
  background: var(--bg);
  background-image: radial-gradient(ellipse at 50% 0%, #151310, var(--bg) 70%);
  color: var(--text);
  font-family: 'Cormorant Garamond', Garamond, 'Times New Roman', serif;
  min-height: 100dvh;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}

body.no-scroll { overflow: hidden; }

/* ─── header ─── */

.header {
  padding: 24px 20px 16px;
  padding-left: calc(20px + var(--safe-l));
  padding-right: calc(20px + var(--safe-r));
  text-align: center;
  opacity: 0;
  animation: fadeIn 0.8s var(--ease) 0.1s forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}

.title {
  font-weight: 300;
  font-style: italic;
  font-size: clamp(1.2rem, 3vw, 2rem);
  letter-spacing: 0.04em;
  color: var(--text);
}

/* ─── gallery grid ─── */

.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(var(--cell-size), 1fr));
  gap: var(--grid-gap);
  padding: 0 var(--grid-gap);
  padding-left: calc(var(--grid-gap) + var(--safe-l));
  padding-right: calc(var(--grid-gap) + var(--safe-r));
  padding-bottom: 80px;
  touch-action: pan-y pinch-zoom;
}

.gallery-item {
  aspect-ratio: 1;
  overflow: hidden;
  background: var(--bg-elevated);
  cursor: pointer;
  position: relative;
  opacity: 0;
  transform: scale(0.92);
}

.gallery-item.visible {
  animation: tileIn 0.3s var(--ease) forwards;
}

@keyframes tileIn {
  to { opacity: 1; transform: scale(1); }
}

.gallery-item img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
  pointer-events: none;
}

/* ─── zoom-dependent hover effects ─── */

.gallery.zoom-xs .gallery-item { border-radius: 0; }
.gallery.zoom-xs .gallery-item:hover,
.gallery.zoom-xs .gallery-item:active {
  z-index: 2;
  box-shadow: 0 0 0 2px var(--accent);
}

.gallery.zoom-sm .gallery-item {
  border-radius: 1px;
  transition: box-shadow 0.2s ease;
}
.gallery.zoom-sm .gallery-item:hover,
.gallery.zoom-sm .gallery-item:active {
  z-index: 2;
  box-shadow: 0 0 0 2px var(--accent);
}
.gallery.zoom-sm .gallery-item img {
  transition: transform 0.3s var(--ease);
}
.gallery.zoom-sm .gallery-item:hover img {
  transform: scale(1.06);
}

.gallery.zoom-md .gallery-item {
  border-radius: 2px;
  transition: transform 0.3s var(--ease), box-shadow 0.3s var(--ease);
}
.gallery.zoom-md .gallery-item:hover {
  z-index: 2;
  transform: translateY(-3px);
  box-shadow: 0 8px 28px var(--accent-glow), 0 0 0 1px rgba(184, 132, 90, 0.2);
}
.gallery.zoom-md .gallery-item img {
  transition: transform 0.35s var(--ease), filter 0.35s var(--ease);
}
.gallery.zoom-md .gallery-item:hover img {
  transform: scale(1.04);
  filter: brightness(1.06);
}

.gallery.zoom-lg .gallery-item {
  border-radius: 3px;
  transition: transform 0.4s var(--ease), box-shadow 0.4s var(--ease);
}
.gallery.zoom-lg .gallery-item:hover {
  z-index: 2;
  transform: translateY(-5px);
  box-shadow: 0 16px 48px var(--accent-glow), 0 0 0 1px rgba(184, 132, 90, 0.3);
}
.gallery.zoom-lg .gallery-item img {
  transition: transform 0.4s var(--ease), filter 0.4s var(--ease);
}
.gallery.zoom-lg .gallery-item:hover img {
  transform: scale(1.03);
  filter: brightness(1.08);
}

@media (hover: none) {
  .gallery .gallery-item:hover { transform: none !important; box-shadow: none !important; }
  .gallery .gallery-item:hover img { transform: none !important; filter: none !important; }
  .gallery .gallery-item:active {
    z-index: 2;
    box-shadow: 0 0 0 2px var(--accent) !important;
    opacity: 0.85;
  }
}

/* ─── zoom bar ─── */

.zoom-bar {
  position: fixed;
  bottom: calc(16px + var(--safe-b));
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 18px;
  background: rgba(14, 13, 10, 0.88);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 28px;
  border: 1px solid rgba(184, 132, 90, 0.12);
  z-index: 100;
  opacity: 0;
  animation: barIn 0.5s var(--ease) 0.4s forwards;
  max-width: calc(100vw - 32px);
}

@keyframes barIn {
  from { opacity: 0; transform: translateX(-50%) translateY(10px); }
  to   { opacity: 1; transform: translateX(-50%) translateY(0); }
}

.zoom-btn {
  background: none;
  border: none;
  color: var(--text-muted);
  font-family: inherit;
  font-size: 1.3rem;
  font-weight: 300;
  line-height: 1;
  cursor: pointer;
  padding: 6px 8px;
  min-width: 36px;
  min-height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 0.2s ease;
  user-select: none;
  -webkit-user-select: none;
  -webkit-tap-highlight-color: transparent;
}
.zoom-btn:hover, .zoom-btn:active { color: var(--text); }

.zoom-slider {
  -webkit-appearance: none;
  appearance: none;
  width: clamp(100px, 28vw, 180px);
  height: 3px;
  background: var(--text-muted);
  border-radius: 2px;
  outline: none;
  opacity: 0.6;
  transition: opacity 0.2s ease;
  -webkit-tap-highlight-color: transparent;
}
.zoom-slider:hover, .zoom-slider:active { opacity: 1; }

.zoom-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--accent);
  cursor: grab;
  box-shadow: 0 0 8px rgba(184, 132, 90, 0.3);
}
.zoom-slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--accent);
  cursor: grab;
  border: none;
}

/* ─── lightbox ─── */

.lightbox {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(6, 5, 4, 0.97);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
  cursor: zoom-out;
}

.lightbox.active { opacity: 1; visibility: visible; }

.lightbox::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at center, transparent 40%, rgba(0, 0, 0, 0.35) 100%);
  pointer-events: none;
}

.lightbox-img {
  position: relative;
  z-index: 2;
  max-width: calc(100vw - 32px);
  max-height: calc(100dvh - 80px - var(--safe-b));
  object-fit: contain;
  border-radius: 2px;
  transform: scale(0.92);
  opacity: 0;
  transition: transform 0.35s var(--ease), opacity 0.25s ease;
  cursor: default;
  user-select: none;
  -webkit-user-select: none;
}

.lightbox.active .lightbox-img { transform: scale(1); opacity: 1; }

.lightbox-close {
  position: absolute;
  top: calc(12px + env(safe-area-inset-top, 0px));
  right: calc(14px + var(--safe-r));
  z-index: 10;
  background: none;
  border: none;
  color: var(--text-muted);
  font-family: inherit;
  font-size: 2rem;
  font-weight: 300;
  line-height: 1;
  cursor: pointer;
  padding: 10px 14px;
  min-width: 44px;
  min-height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 0.2s ease;
  -webkit-tap-highlight-color: transparent;
}
.lightbox-close:hover, .lightbox-close:active { color: var(--text); }

.lightbox-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;
  background: none;
  border: none;
  color: var(--text-muted);
  font-family: inherit;
  font-size: 2.6rem;
  font-weight: 300;
  line-height: 1;
  cursor: pointer;
  padding: 20px;
  min-width: 44px;
  min-height: 44px;
  transition: color 0.2s ease, transform 0.2s ease;
  user-select: none;
  -webkit-user-select: none;
  -webkit-tap-highlight-color: transparent;
}
.lightbox-nav:hover, .lightbox-nav:active { color: var(--text); }
.lightbox-prev { left: calc(4px + var(--safe-l)); }
.lightbox-prev:hover { transform: translateY(-50%) translateX(-3px); }
.lightbox-next { right: calc(4px + var(--safe-r)); }
.lightbox-next:hover { transform: translateY(-50%) translateX(3px); }

.lightbox-counter {
  position: absolute;
  bottom: calc(20px + var(--safe-b));
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  font-variant-numeric: tabular-nums;
  font-size: 0.85rem;
  font-weight: 400;
  letter-spacing: 0.12em;
  color: var(--text-muted);
}

/* ─── responsive ─── */

@media (max-width: 600px) {
  .header { padding: 18px 14px 12px; }
  .lightbox-nav { font-size: 2rem; padding: 14px; }
}

@media (max-width: 480px) {
  .header { padding: 14px 12px 10px; }
  .title { letter-spacing: 0.02em; }
  .lightbox-nav { display: none; }
  .gallery { padding-bottom: 72px; }
}

@media (min-width: 1400px) {
  .gallery { max-width: 1800px; margin: 0 auto; }
}

@media (orientation: landscape) and (max-height: 500px) {
  .header { padding: 8px 16px 6px; }
  .title { font-size: 1rem; }
  .gallery { padding-bottom: 64px; }
  .zoom-bar { bottom: calc(8px + var(--safe-b)); padding: 6px 14px; }
  .lightbox-img { max-height: calc(100dvh - 40px); }
  .lightbox-counter { bottom: calc(8px + var(--safe-b)); font-size: 0.75rem; }
}

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}

:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
